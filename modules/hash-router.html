
<dom-module id="hash-router">
  <style>
    :host {
      display: none;
    }
  </style>
  <script>
    Polymer({
      is : 'hash-router',

      lastHash: String,

      properties : {

        selected : {
          type : Number,
          notify : true,
          observer : '_selectedChanged'
        }
      },

      ready : function () {
        var host = this;

        window.location.hash = "home";

        window.addEventListener("hashchange", function() {
          // console.log("hashchanged");
          // console.log(location.hash);
          var toSelect = router.getIndex(location.hash);
          if(host.selected != toSelect && toSelect != undefined && toSelect != null)
            host.selected = toSelect;

        }, true);

        //host.selected = router.getIndex(location.hash);
      },

      _selectedChanged : function () {
        var newHash = router.teg(this.selected);
        if(location.hash != ("#" + newHash) && newHash != undefined && newHash != null )
          window.location.hash = newHash;
      }

    });
  </script>
</dom-module>
